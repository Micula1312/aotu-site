---
import Base from "../../layouts/Base.astro";
const { title, subtitle, scriptUrl } = Astro.props;
import "../../styles/archive.css";
---
<Base>
  <Fragment slot="head-title">{title}</Fragment>

  <header>
    <h1>{title}</h1>
    {subtitle && <p class="sub">{subtitle}</p>}
  </header>

  <!-- FILTRI ARCHIVIO (blocco integrato al posto dello slot) -->
  <section class="bar" aria-label="Filters">
    <form id="archive-filters" class="grid gap-2 mb-3" style="grid-template-columns: repeat(12, minmax(0,1fr));">
      
      <div  class="archive-filters-wrapper">
      <select id="type" name="mtype" class="input col-span-3" title="Media type">
        <option value="">All media</option>
        <option value="image">Images</option>
        <option value="video">Videos</option>
        <option value="audio">Audio</option>
        <option value="doc">Documents</option>
      </select>

      <input id="q" class="input col-span-6" type="search" placeholder="Search (title, alt, caption)..." />

      <button id="refresh" class="btn col-span-3" type="button">Refresh</button>


      </div>
      


      <!-- pill filtri attivi -->
      <div class="col-span-12 flex gap-2 items-center mt-1">
        <div id="activeFilters" class="flex gap-2"></div>
        <button id="clearAllFilters" class="btn btn--ghost small" type="button" hidden>Clear all</button>
      </div>

      <div id="tagList" class="col-span-12" style="margin-top:6px"></div>
    </form>
  </section>

  <div id="state" class="loading">Loadingâ€¦</div>
  <div id="grid" class="grid" hidden></div>

  <dialog id="lb">
    <button class="close" onclick="document.getElementById('lb').close()">Close</button>
    <div class="lb-wrap">
      <div class="lb-media" id="lbMedia"></div>
      <div class="lb-meta">
        <h3 class="lb-title" id="lbTitle"></h3>
        <div class="muted" id="lbInfo"></div>
        <div id="lbTags" style="margin-top:8px"></div>
        <div id="lbNotes" style="margin-top:10px"></div>
      </div>
    </div>
  </dialog>

  {scriptUrl && <script type="module" src={scriptUrl}></script>}
</Base>
